(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1860f736"],{"22de":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrap"},[e.isClickPopupReplyTweet?r("popupReply",{attrs:{tweet:e.tweetPopup,user:e.user},on:{"close-PopupReply":e.closePopupReply,"after-create-reply":e.afterCreateReply}}):e._e(),r("navigation",{attrs:{userId:e.currentUser.id}}),r("div",{staticClass:"main"},[r("userTitle",{attrs:{userName:e.user.name,tweetNum:e.user.tweetsCount}}),e.isMe?r("userInfo",{attrs:{"initial-user":e.currentUser}}):r("userInfoOther",{attrs:{"initial-user":e.user,changeBtnColor:e.changeBtnColor,ifFollowOtherUser:e.ifFollowOtherUser},on:{"if-follow-this-other-user":e.ifFollowThisOtherUser}}),r("navTabs",{attrs:{userId:Number(e.$route.params.id)}}),r("div",{staticClass:"tweet-wrap"},e._l(e.tweets,(function(t){return r("div",{key:t.id,staticClass:"tweet-card"},[r("div",{staticClass:"tweet-avatar"},[r("img",{attrs:{src:e._f("emptyAvatar")(e.user.avatar),alt:""}})]),r("div",{staticClass:"tweet-content"},[r("div",{staticClass:"tweet-name-group"},[r("p",{staticClass:"tweet-name"},[r("b",[e._v(e._s(e.user.name))])]),r("p",{staticClass:"tweet-account fz14"},[e._v(" @"+e._s(e.user.account)+"・"+e._s(e._f("fromNow")(t.createdAt))+" ")])]),r("router-link",{staticClass:"tweet-text",attrs:{to:{name:"tweet",params:{id:t.id}}}},[r("p",[e._v(" "+e._s(t.description)+" ")])]),r("div",{staticClass:"tweet-count"},[r("div",{staticClass:"tweet-reply",on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.openPopupReply(t.id)}}},[e._m(0,!0),r("p",{staticClass:"fz14"},[r("b",[e._v(e._s(t.Replies))])])]),t.isLiked?e._e():r("div",{staticClass:"tweet-like",on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.addLike(t.id)}}},[e._m(1,!0),r("p",{staticClass:"fz14"},[r("b",[e._v(e._s(t.Likes))])])]),t.isLiked?r("div",{staticClass:"tweet-like",on:{click:function(r){return r.preventDefault(),r.stopPropagation(),e.unLike(t.id)}}},[e._m(2,!0),r("p",{staticClass:"fz14"},[r("b",[e._v(e._s(t.Likes))])])]):e._e()])],1)])})),0)],1),r("followTop",{attrs:{initialUser:e.currentUser,otherUser:e.user,ifFollowOtherUser:e.ifFollowOtherUser,followOtherId:e.followOtherId},on:{"if-change-btn-color":e.ifChangeBtnColor,"add-following-num":e.addFollowingNum,"un-following-num":e.unFollowingNum}})],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tweet-reply-img"},[a("img",{attrs:{src:r("f5b6"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tweet-like-img"},[a("img",{attrs:{src:r("3c8a"),alt:""}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tweet-like-img"},[a("img",{attrs:{src:r("7e3a"),alt:""}})])}],o=r("5530"),i=r("2909"),s=r("1da1"),l=(r("96cf"),r("b0c0"),r("d3b7"),r("d81d"),r("7db0"),r("d9e2"),r("3d01")),c=r("447a"),u=r("5372"),p=r("87fa"),f=r("8e6e"),w=r("fc26"),d=r("f8df"),A=r("1602"),h=r("6783"),m=r("2708"),g=r("2f62"),v=r("2fa3"),C={name:"SelfPage",components:{navigation:l["a"],followTop:c["a"],userInfo:u["a"],userTitle:f["a"],navTabs:w["a"],userInfoOther:p["a"],popupReply:d["a"]},data:function(){return{user:{id:-1,account:"",name:"",email:"",role:"",introduction:"",avatar:"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+",cover:"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+",followingCount:-1,followerCount:-1,isFollowing:!1,tweetsCount:0},tweets:[],isMe:!0,isClickPopupEditModal:!1,isClickPopupReplyTweet:!1,tweetPopup:{},ifFollowOtherUser:!1,followOtherId:-1,changeBtnColor:!1,myFollowingList:[],ifFollow:!1}},methods:{fetchUser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,o,i,s,l,c,u,p,f,w,d,h,m,g,C;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,A["a"].getUser(e);case 3:a=r.sent,n=a.data,o=n.id,i=n.account,s=n.name,l=n.email,c=n.role,u=n.introduction,p=n.avatar,f=n.cover,w=n.isFollowing,d=n.createdAt,h=n.updatedAt,m=n.followingCount,g=n.followerCount,C=n.tweetsCount,t.user={id:o,account:i,name:s,email:l,role:c,introduction:u,avatar:p,cover:f,followingCount:m,followerCount:g,isFollowing:w,createdAt:d,updatedAt:h,tweetsCount:C},r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("error",r.t0),v["a"].fire({icon:"error",title:"無此使用者或讀取資料錯誤"});case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},confirmUserFollowing:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,A["a"].getFollowing(e);case 3:a=r.sent,t.myFollowingList=a.data,t.ifFollowOtherUser=t.myFollowingList.some((function(e){return e.followingId===t.user.id})),t.changeBtnColor=t.ifFollowOtherUser,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log("error",r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},ifFollowThisOtherUser:function(e){var t=e.ifFollowOtherUser,r=e.followOtherId;this.ifFollowOtherUser=t,this.followOtherId=r,console.log("this.ifFollowOtherUser",this.ifFollowOtherUser)},ifChangeBtnColor:function(e){var t=e.changeBtnColor;this.ifFollowOtherUser=t,console.log("payload.changeBtnColor",this.ifFollowOtherUser)},fetchTweets:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,A["a"].getUserTweets(e);case 3:a=r.sent,t.tweets=Object(i["a"])(a.data),t.tweets=t.tweets.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{User:{name:t.user.name,account:t.user.account,avatar:t.user.avatar}})})),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("error",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},openPopupReply:function(e){this.tweetPopup=this.tweets.find((function(t){return t.id===e})),this.isClickPopupReplyTweet=!0},closePopupReply:function(e){var t=e.isClickPopupReplyTweet;this.isClickPopupReplyTweet=t},afterCreateReply:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=e.comment,n=e.TweetId,console.log("payload",e),console.log("comment, TweetId ",a,n),r.next=6,h["a"].postTweetsReply({comment:a,TweetId:n});case 6:t.$router.push({name:"tweet",params:{id:n}}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),v["a"].fire({icon:"error",title:"無法新增此筆tweetReply"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},addFollowingNum:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{a=e.followingCount,n=e.followingId,t.isMe?t.currentUser.followingCount=a:t.user.id===n&&(t.user.followerCount=t.user.followerCount+1)}catch(o){v["a"].fire({icon:"error",title:"無法新增此筆addFollowingNum"})}case 1:case"end":return r.stop()}}),r)})))()},unFollowingNum:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{a=e.followingCount,n=e.followingId,t.isMe?t.currentUser.followingCount=a:t.user.id===n&&(t.user.followerCount=t.user.followerCount-1)}catch(o){v["a"].fire({icon:"error",title:"無法新增此筆unFollowingNum"})}case 1:case"end":return r.stop()}}),r)})))()},addLike:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,A["a"].addLike({TweetId:e});case 3:t.tweets=t.tweets.map((function(t){return t.id===e?Object(o["a"])(Object(o["a"])({},t),{},{isLiked:!0,Likes:t.Likes+1}):t})),r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),v["a"].fire({icon:"error",title:"無法like此筆tweet，請稍後再試"});case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},unLike:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,A["a"].unLike({TweetId:e});case 3:if(a=r.sent,"Success"===a.data.status){r.next=6;break}throw new Error(a.data.message);case 6:t.tweets=t.tweets.map((function(t){return t.id===e?Object(o["a"])(Object(o["a"])({},t),{},{isLiked:!1,Likes:t.Likes-1}):t})),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),v["a"].fire({icon:"error",title:"無法unlike此筆tweet，請稍後再試"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},isThisMe:function(e){this.isMe=this.currentUser.id==e}},computed:Object(o["a"])({},Object(g["b"])(["currentUser"])),created:function(){var e=localStorage.getItem("token");e||(v["a"].fire({icon:"warning",title:"請登入"}),this.$router.push("/login"));var t=this.$route.params.id;this.fetchUser(t),this.fetchTweets(t),this.isThisMe(t),this.confirmUserFollowing(this.currentUser.id)},watch:{"$route.params.id":{handler:function(e){this.fetchUser(e),this.fetchTweets(e),this.isThisMe(e)},immediate:!0}},mixins:[m["b"],m["a"]]},R=C,b=(r("3006"),r("2877")),U=Object(b["a"])(R,a,n,!1,null,"02b493be",null);t["default"]=U.exports},3006:function(e,t,r){"use strict";r("504a")},"3c8a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAYAAADU8sWcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMMSURBVHgB7VZLbhNBEK3q6WEREJgbmBPEYsUKYi4Qs2SFvYsgKIOUoAgleBwbFGILJoodZZf4BM4NMmLBgg3mBs4NLMECxZ5uqtq28GfGmSQWsMiT7Pl0db2qmvo0wDX+AXDaouM4icCeywBa8/wcaPiuOh3/wNtuhckvr24saMCUQJjXWp+CgGZ1p3R8YfLltbcroLVLEonJXehWd7YKg8clZz0pbfuQbhfGRTVAC7XOVSslPxb58uuNPGh06bZN2+ugwCfJNinKIuBi3yC/Wi6mmdiy7RNSlNRIRIrkNTRRYILkF0kuY4xAzNZ2tupTyY3HoD1WFAgrfbDttobXl9bdpKWCE9SQRARPacgYYq3rdlc6nue2h+VfrG46JPeJHVEQpPfL75uh5I7jJjp28I2VdS3r3jhxmAH9V8cUhScQgSEDTLQG78WwUGAHxgv6HUURM3iNwpvje44QGfoKpqBWKXr0KTgiC5zEoeRa6ZS5UgjhHHACkZE5NmKaoX+U93SeibnM4JUcERBgSkqhakMM7JWLRxAXCBM6Rz3XcGpeapGAv4ARcux9F1BKJWHWQDRRFUK0QskJPv9ZlvUIZgyqeZNPsvuzGUouA+lzVpJgZjgrrwpuu1xFpNv3PK8dSm4aBBrvEx15MwszAnW3Z3xVCCNVJCYl9a65oliZhffcfsnrLPeD/bHqmCDvDQDtmy4nbztwRUj7RoOvVEmF8TURtqFryZzpSKjzz9fepOCSMAMKdCrM60hy7liUdMZSBKtxmfAbo3uTEXhAhcmIqM2mH9PAMOG3b53ABdD7zpYJNxlQiGq/YpoS2bFyHDLyP/VybfMQYhIP5jsx71YrW26ULJ6rbHh8IhzLsx+54VqNIubhVKuUstN0n0s+bgAfi4JOJz1+juNGQuoafMqJQxybfGCADFTDZC8ZwAnJGWwOmTfu5LVW/bKkUJdLsUo0NvkA5CEdKjHf4+mPyd6Zrk0GFGqVd15cXRZcEF+/fPbvP3xcR6XuIuIDIv5FHeSD7Mqnex+LPlzjf8dv3gtecMwCXM4AAAAASUVORK5CYII="},"504a":function(e,t,r){},"7db0":function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").find,o=r("44d2"),i="find",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},"7e3a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAYAAADU8sWcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHdSURBVHgB7ZbNbcIwFIDfc0KqcmIENoARYIMcEZfCBGUDYILCBIULicSFDcgIdIOwASeKiOLXZwRSoE5wEKE98F2i2M/5/PwTG+DJH4BZleS6lbhcdpGodnhH/IqkDF59P9TFR61WgyyrbnG8BFhzu5XteYvc8rjdfmfZAIgqmkYDazYbnt6/W61qCfETEBuaT4UkZbfk+4HmO1pxn1gAWRAFnFVTiR0hlhxfzQrn0eig500z5YeMAUZgACKOuBPuNfGRjYyipjOfr04FIllLnY4a4h4YQkQ9Q7GiImz7I1lwJo/3ezfHx/LDa0ItYq2cxXUomIh3j1bOc1iDB3Iml1Ku4YFcZr6BgkEpQ72c9y4UjL3b6bea9fIS8KO47Dk5XCw2WjlOJqoigKIgOvvDiV/1Uo6hGHFo+/4EsuSHAwAxgPvLh5dFQhcXxXEX7jn3mqxT5eq8lpqe3kpE1NSVi7QGjuepky31ImAK/7KHaZcPkdXQcpwu7/0QbhUTjUuz2SCtPvMapThcFhCXfKupQg542qY8ep2smKvyWzpgIlYIMEDN2Z4XDfd0dS1WDbWJWGGUeZKo3R5wo76maqN2yHGhGpFbrlDTYPHNViC+KSmv6LG93Y6S/+0n/5YffUfReIUCgMcAAAAASUVORK5CYII="},e920:function(e,t,r){},f5b6:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAYAAADU8sWcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKcSURBVHgB7VZdbtNAEJ611zwgUfkG+AakN3BOQDgB6VtFjeqqJOpDmji0oEoN4EhplLeUG7QnINwgnABzgzzXaw+zGxcldn4dixf4HpL17ux+87M7MwD/Ktg2wq7rmg/GU0tDzVy0LgQPBr4XwIZYSy4JxZO9YwSsMgQLNsMoBvjav764hbzkTq15DIgeSSlLESCgDWMWwyQtixrJIJrAWIk+/8hHYVge+FfBVuROvdECZF5ydFeE3N/Upc67ho0aGyaemsQQlfvXH8cbkT8SIyNLYzzodS5HkAOkBHmNtaQCIgz30x7Q0hsO3TMrsXgSaXo5L7EE7fUoFG0amtwwhun1DLluGFJT2hO3B1eb39yVCgCOaGjLcCwld13PpDhUpbtvOh98KAoIbfU/DcFicqELW00ijKBAqNCheiGlpeR0/dRijPEPKBwsoB/z6PTy+WLyBBjjBArnjjNnzpEjMCXANGbCX8AcOUMM1CTTXkDRQJX5JjefGr8WkvOIq4tBabEiczoUBOe0UZEpms79Pjs/R+77HhHjPQ1NwfdcKAqaNs0dAHdLySUizj31LBi2jurN17AjVHECLMncka5yGXKZ1WIGJ3JMd+DWqTdbkBNT5VElK5mq0+vLq5qKExsmsQo0Bnf0BO9lw6CUXFPhEosVcRzBQf9ztravrOeHZ56lC+ExxrLuR9budd57mT1UmJIiYoMspxGcLCJeSz6rhBFFNnngZdIw2HQvRr3OxZwrpZupBPvT5gPHQuevVhWnrXq4R0V4FP2cJVetlvFMWluZSmGXh9yTr2fVWRx2xNvaeVUgfKGhuW3zkZucejbLqZ1/Qxlb5T/sGg/rrS2EPOnPrF1aLQ12grRW39+l1doaMs5val4J/iMnfgM24i34Qh8jkgAAAABJRU5ErkJggg=="},f8df:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popupReply-wrap"},[a("div",{staticClass:"overlay",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closePopupReply.apply(null,arguments)}}}),a("div",{staticClass:"popupReply"},[a("div",{staticClass:"popupReply-colse"},[a("div",{staticClass:"popupReply-colse-img",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.closePopupReply.apply(null,arguments)}}},[a("img",{attrs:{src:r("3e02"),alt:""}})])]),a("div",{staticClass:"popupReply-text-wrap"},[a("div",{staticClass:"popupReply-user"},[a("div",{staticClass:"popupReply-avatar"},[a("div",{staticClass:"popupReply-avatar-img"},[a("img",{attrs:{src:e._f("emptyAvatar")(e.tweet.User.avatar),alt:""}})])]),a("div",{staticClass:"popupReply-content"},[a("div",{staticClass:"popupReply-name-group"},[a("p",{staticClass:"popupReply-name"},[a("b",[e._v(e._s(e.tweet.User.name))])]),a("p",{staticClass:"popupReply-account fz14"},[e._v(" @"+e._s(e.tweet.User.account)+"・"+e._s(e._f("fromNow")(e.tweet.createdAt))+" ")])]),a("div",{staticClass:"popupReply-text"},[a("p",[e._v(" "+e._s(e.tweet.description)+" ")]),a("p",{staticClass:"reply-to fz14"},[a("span",[e._v("回覆給")]),e._v(" @"+e._s(e.tweet.User.name)+" ")])])])]),a("div",{staticClass:"popupReply-again-inner"},[a("div",{staticClass:"popupReply-again-avatar"},[a("img",{attrs:{src:e._f("emptyAvatar")(e.user.avatar),alt:""}})]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.popupText,expression:"popupText"}],attrs:{name:"",id:"",maxlength:"80",placeholder:"推你的回覆"},domProps:{value:e.popupText},on:{input:function(t){t.target.composing||(e.popupText=t.target.value)}}})]),a("div",{staticClass:"popupReply-btn-wrap"},[e.popupText.length>=80?a("div",{staticClass:"post-text-num-warning"},[e._v(" 字數不可超過 80 字 ")]):e._e(),e.noZero?a("div",{staticClass:"post-text-num-warning"},[e._v("不得為空白")]):e._e(),a("div",{staticClass:"btn popupReply-btn active",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[e._v(" 推文 ")])])])])])},n=[],o=(r("498a"),r("2708")),i={name:"popupReply",props:{tweet:{type:Object,required:!0},user:{type:Object,required:!0}},data:function(){return{popupText:"",noZero:!1}},watch:{popupText:function(){this.popupText&&(this.noZero=!1)}},methods:{closePopupReply:function(){this.$emit("close-PopupReply",{isClickPopupReplyTweet:!1})},handleSubmit:function(){this.popupText.trim().length>=80||(this.popupText.trim()?this.$emit("after-create-reply",{TweetId:this.tweet.id,comment:this.popupText}):this.noZero=!0)}},mixins:[o["b"],o["a"]]},s=i,l=(r("fb68"),r("2877")),c=Object(l["a"])(s,a,n,!1,null,"4b17b196",null);t["a"]=c.exports},fb68:function(e,t,r){"use strict";r("e920")}}]);
//# sourceMappingURL=chunk-1860f736.a72383eb.js.map