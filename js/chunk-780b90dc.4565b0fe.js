(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-780b90dc"],{3866:function(e,t,r){},"7d44":function(e,t,r){"use strict";r("3866")},ab60:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrap"},[r("navigation",{attrs:{userId:e.currentUser.id}}),r("div",{staticClass:"main"},[r("userTitle",{attrs:{userName:e.user.name,tweetNum:e.user.tweetsCount}}),e.isMe?r("userInfo",{attrs:{"initial-user":e.currentUser}}):r("userInfoOther",{attrs:{"initial-user":e.user,changeBtnColor:e.changeBtnColor,ifFollowOtherUser:e.ifFollowOtherUser},on:{"if-follow-this-other-user":e.ifFollowThisOtherUser}}),r("navTabs",{attrs:{userId:Number(e.$route.params.id)}}),r("div",{staticClass:"tweet-wrap"},e._l(e.replies,(function(t){return r("div",{key:t.id,staticClass:"tweet-card"},[r("div",{staticClass:"tweet-avatar"},[r("img",{attrs:{src:e._f("emptyAvatar")(e.user.avatar),alt:""}})]),r("div",{staticClass:"tweet-content"},[r("div",{staticClass:"tweet-name-group"},[r("p",{staticClass:"tweet-name"},[r("b",[e._v(e._s(e.user.name))])]),r("p",{staticClass:"tweet-account fz14"},[e._v(" @"+e._s(e.user.account)+"・"+e._s(e._f("fromNow")(t.createdAt))+" ")])]),r("div",[r("p",{staticClass:"fz14"},[r("span",{staticClass:"reply-title"},[e._v("回覆")]),r("span",{staticClass:"reply-account"},[e._v(" @"+e._s(t.Tweet.User.account))])])]),r("router-link",{staticClass:"tweet-text",attrs:{to:{name:"tweet",params:{id:t.TweetId}}}},[r("p",[e._v(" "+e._s(t.comment)+" ")])])],1)])})),0)],1),r("followTop",{attrs:{initialUser:e.currentUser,ifFollowOtherUser:e.ifFollowOtherUser,followOtherId:e.followOtherId,otherUser:e.user},on:{"if-follow-this-other-user":e.ifFollowThisOtherUser,"if-change-btn-color":e.ifChangeBtnColor,"add-following-num":e.addFollowingNum,"un-following-num":e.unFollowingNum}})],1)},n=[],i=r("5530"),a=r("2909"),s=r("1da1"),l=(r("96cf"),r("b0c0"),r("d3b7"),r("4de4"),r("3d01")),c=r("447a"),u=r("5372"),f=r("87fa"),w=r("8e6e"),h=r("fc26"),d=r("1602"),g=r("2f62"),m=r("2708"),p=r("2fa3"),v={name:"mainPage",components:{navigation:l["a"],followTop:c["a"],userInfo:u["a"],userTitle:w["a"],navTabs:h["a"],userInfoOther:f["a"]},data:function(){return{user:{id:-1,account:"",name:"",role:"",introduction:"",avatar:"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+",cover:"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+",followingCount:-1,followerCount:-1,isFollowing:!1,tweetsCount:0},replies:[],isMe:!0,ifFollowOtherUser:!1,followOtherId:-1,changeBtnColor:!1,myFollowingList:[],ifFollow:!1}},methods:{fetchUser:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var o,n,i,a,s,l,c,u,f,w,h,g,m,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].getUser(e);case 3:o=r.sent,n=o.data,i=n.id,a=n.account,s=n.name,l=n.email,c=n.role,u=n.introduction,f=n.avatar,w=n.cover,h=n.isFollowing,g=n.followingCount,m=n.followerCount,v=n.tweetsCount,t.user={id:i,account:a,name:s,email:l,role:c,introduction:u,avatar:f,cover:w,followingCount:g,followerCount:m,isFollowing:h,tweetsCount:v},r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("error",r.t0),p["a"].fire({icon:"error",title:"無此使用者或讀取資料錯誤"});case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},confirmUserFollowing:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].getFollowing(e);case 3:o=r.sent,t.myFollowingList=o.data,t.ifFollowOtherUser=t.myFollowingList.some((function(e){return e.followingId===t.user.id})),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log("error",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},ifFollowThisOtherUser:function(e){var t=e.ifFollowOtherUser,r=e.followOtherId;this.ifFollowOtherUser=t,this.followOtherId=r},ifChangeBtnColor:function(e){var t=e.changeBtnColor;console.log("changeBtnColor.changeBtnColor",t),console.log("changeBtnColor.payload",e),this.ifFollowOtherUser=t},fetchUserReplies:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].getUserReplies(e);case 3:o=r.sent,t.replies=Object(a["a"])(o.data),t.replies=t.replies.filter((function(e){return e.Tweet})),t.replies.length<1&&p["a"].fire({icon:"info",title:"目前沒有回覆的內容"}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},addFollowingNum:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{o=e.followingCount,n=e.followingId,t.isMe?t.currentUser.followingCount=o:t.user.id===n&&(t.user.followerCount=t.user.followerCount+1)}catch(i){p["a"].fire({icon:"error",title:"無法新增此筆addFollowing"})}case 1:case"end":return r.stop()}}),r)})))()},unFollowingNum:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:try{o=e.followingCount,n=e.followingId,t.isMe?t.currentUser.followingCount=o:t.user.id===n&&(t.user.followerCount=t.user.followerCount-1)}catch(i){p["a"].fire({icon:"error",title:"無法新增此筆unFollowing"})}case 1:case"end":return r.stop()}}),r)})))()},isThisMe:function(e){this.isMe=this.currentUser.id==e}},computed:Object(i["a"])({},Object(g["b"])(["currentUser"])),created:function(){var e=localStorage.getItem("token");e||(p["a"].fire({icon:"warning",title:"請登入"}),this.$router.push("/login"));var t=this.$route.params.id;this.fetchUser(t),this.fetchUserReplies(t),this.isThisMe(t),this.confirmUserFollowing(this.currentUser.id)},watch:{"$route.params.id":{handler:function(e){this.fetchUser(e),this.fetchUserReplies(e),this.isThisMe(e)},immediate:!0}},mixins:[m["b"],m["a"]]},C=v,U=(r("7d44"),r("2877")),F=Object(U["a"])(C,o,n,!1,null,"5b6aef09",null);t["default"]=F.exports}}]);
//# sourceMappingURL=chunk-780b90dc.4565b0fe.js.map