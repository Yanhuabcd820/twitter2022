{"version":3,"sources":["webpack:///./src/assets/css/main.css?16ad","webpack:///./src/views/SelfPageReply.vue?11cf","webpack:///src/views/SelfPageReply.vue","webpack:///./src/views/SelfPageReply.vue?e5a8","webpack:///./src/views/SelfPageReply.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","currentUser","id","user","name","tweetsCount","changeBtnColor","ifFollowOtherUser","on","ifFollowThisOtherUser","Number","$route","params","_l","reply","key","_f","avatar","_v","_s","account","createdAt","Tweet","User","TweetId","comment","followOtherId","ifChangeBtnColor","addFollowingNum","unFollowingNum","staticRenderFns","components","navigation","followTop","userInfo","userTitle","navTabs","userInfoOther","data","role","introduction","cover","followingCount","followerCount","isFollowing","replies","isMe","myFollowingList","ifFollow","methods","fetchUser","userId","userAPI","response","email","console","Toast","icon","title","confirmUserFollowing","dataFollowing","payload","fetchUserReplies","followingId","isThisMe","paramsId","computed","mapState","created","watch","handler","immediate","mixins","component"],"mappings":"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","file":"js/chunk-780b90dc.4565b0fe.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!./main.css?vue&type=style&index=0&id=5b6aef09&lang=css&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('navigation',{attrs:{\"userId\":_vm.currentUser.id}}),_c('div',{staticClass:\"main\"},[_c('userTitle',{attrs:{\"userName\":_vm.user.name,\"tweetNum\":_vm.user.tweetsCount}}),(_vm.isMe)?_c('userInfo',{attrs:{\"initial-user\":_vm.currentUser}}):_c('userInfoOther',{attrs:{\"initial-user\":_vm.user,\"changeBtnColor\":_vm.changeBtnColor,\"ifFollowOtherUser\":_vm.ifFollowOtherUser},on:{\"if-follow-this-other-user\":_vm.ifFollowThisOtherUser}}),_c('navTabs',{attrs:{\"userId\":Number(_vm.$route.params.id)}}),_c('div',{staticClass:\"tweet-wrap\"},_vm._l((_vm.replies),function(reply){return _c('div',{key:reply.id,staticClass:\"tweet-card\"},[_c('div',{staticClass:\"tweet-avatar\"},[_c('img',{attrs:{\"src\":_vm._f(\"emptyAvatar\")(_vm.user.avatar),\"alt\":\"\"}})]),_c('div',{staticClass:\"tweet-content\"},[_c('div',{staticClass:\"tweet-name-group\"},[_c('p',{staticClass:\"tweet-name\"},[_c('b',[_vm._v(_vm._s(_vm.user.name))])]),_c('p',{staticClass:\"tweet-account fz14\"},[_vm._v(\" @\"+_vm._s(_vm.user.account)+\"・\"+_vm._s(_vm._f(\"fromNow\")(reply.createdAt))+\" \")])]),_c('div',[_c('p',{staticClass:\"fz14\"},[_c('span',{staticClass:\"reply-title\"},[_vm._v(\"回覆\")]),_c('span',{staticClass:\"reply-account\"},[_vm._v(\" @\"+_vm._s(reply.Tweet.User.account))])])]),_c('router-link',{staticClass:\"tweet-text\",attrs:{\"to\":{ name: 'tweet', params: { id: reply.TweetId } }}},[_c('p',[_vm._v(\" \"+_vm._s(reply.comment)+\" \")])])],1)])}),0)],1),_c('followTop',{attrs:{\"initialUser\":_vm.currentUser,\"ifFollowOtherUser\":_vm.ifFollowOtherUser,\"followOtherId\":_vm.followOtherId,\"otherUser\":_vm.user},on:{\"if-follow-this-other-user\":_vm.ifFollowThisOtherUser,\"if-change-btn-color\":_vm.ifChangeBtnColor,\"add-following-num\":_vm.addFollowingNum,\"un-following-num\":_vm.unFollowingNum}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"wrap\">\n    <navigation :userId=\"currentUser.id\" />\n    <div class=\"main\">\n      <userTitle :userName=\"user.name\" :tweetNum=\"user.tweetsCount\" />\n      <userInfo :initial-user=\"currentUser\" v-if=\"isMe\" />\n      <userInfoOther\n        :initial-user=\"user\"\n        v-else\n        @if-follow-this-other-user=\"ifFollowThisOtherUser\"\n        :changeBtnColor=\"changeBtnColor\"\n        :ifFollowOtherUser=\"ifFollowOtherUser\"\n      />\n      <navTabs :userId=\"Number($route.params.id)\" />\n      <div class=\"tweet-wrap\">\n        <div class=\"tweet-card\" v-for=\"reply in replies\" :key=\"reply.id\">\n          <div class=\"tweet-avatar\">\n            <img :src=\"user.avatar | emptyAvatar\" alt=\"\" />\n          </div>\n          <div class=\"tweet-content\">\n            <div class=\"tweet-name-group\">\n              <p class=\"tweet-name\">\n                <b>{{ user.name }}</b>\n              </p>\n              <p class=\"tweet-account fz14\">\n                @{{ user.account }}・{{ reply.createdAt | fromNow }}\n              </p>\n            </div>\n            <div>\n              <p class=\"fz14\">\n                <span class=\"reply-title\">回覆</span\n                ><span class=\"reply-account\">\n                  @{{ reply.Tweet.User.account }}</span\n                >\n              </p>\n            </div>\n            <router-link\n              :to=\"{ name: 'tweet', params: { id: reply.TweetId } }\"\n              class=\"tweet-text\"\n            >\n              <p>\n                {{ reply.comment }}\n              </p>\n            </router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n    <followTop\n      :initialUser=\"currentUser\"\n      @if-follow-this-other-user=\"ifFollowThisOtherUser\"\n      :ifFollowOtherUser=\"ifFollowOtherUser\"\n      :followOtherId=\"followOtherId\"\n      :otherUser=\"user\"\n      @if-change-btn-color=\"ifChangeBtnColor\"\n      @add-following-num=\"addFollowingNum\"\n      @un-following-num=\"unFollowingNum\"\n    />\n  </div>\n</template>\n<script>\nimport navigation from \"../components/nav\";\nimport followTop from \"../components/followTop\";\nimport userInfo from \"../components/userInfo\";\nimport userInfoOther from \"../components/userInfoOther\";\nimport userTitle from \"../components/userTitle\";\nimport navTabs from \"../components/navTabs\";\nimport userAPI from \"./../apis/user\";\nimport { mapState } from \"vuex\";\nimport { fromNowFilter, emptyImageFilter } from \"./../utils/mixins\";\nimport { Toast } from \"./../utils/helpers\";\n\nexport default {\n  name: \"mainPage\",\n  components: {\n    navigation,\n    followTop,\n    userInfo,\n    userTitle,\n    navTabs,\n    userInfoOther,\n  },\n  data() {\n    return {\n      user: {\n        id: -1,\n        account: \"\",\n        name: \"\",\n        role: \"\",\n        introduction: \"\",\n        avatar: \"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+\",\n        cover: \"https://dummyimage.com/600x400/a1a1a1/fff.jpg&text=+\",\n        followingCount: -1,\n        followerCount: -1,\n        isFollowing: false,\n        tweetsCount: 0,\n      },\n      replies: [],\n      isMe: true,\n      ifFollowOtherUser: false,\n      followOtherId: -1,\n      changeBtnColor: false,\n      myFollowingList: [],\n      ifFollow: false, //我有沒有追蹤這位otherUser\n    };\n  },\n  methods: {\n    async fetchUser(userId) {\n      try {\n        const response = await userAPI.getUser(userId);\n        const {\n          id,\n          account,\n          name,\n          email,\n          role,\n          introduction,\n          avatar,\n          cover,\n          isFollowing,\n          followingCount,\n          followerCount,\n          tweetsCount,\n        } = response.data;\n        this.user = {\n          id,\n          account,\n          name,\n          email,\n          role,\n          introduction,\n          avatar,\n          cover,\n          followingCount,\n          followerCount,\n          isFollowing,\n          tweetsCount,\n        };\n      } catch (error) {\n        console.log(\"error\", error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無此使用者或讀取資料錯誤\",\n        });\n      }\n    },\n    async confirmUserFollowing(userId) {\n      // 先抓我的跟隨清單\n      try {\n        const dataFollowing = await userAPI.getFollowing(userId);\n        this.myFollowingList = dataFollowing.data;\n\n        //確認我有是否已經追蹤此otherUser\n        this.ifFollowOtherUser = this.myFollowingList.some(\n          (follow) => follow.followingId === this.user.id\n        );\n        // console.log(\"this.myFollowingList\", this.myFollowingList);\n        // console.log(\"this.user.id\", this.user.id);\n      } catch (error) {\n        console.log(\"error\", error);\n      }\n    },\n    ifFollowThisOtherUser(payload) {\n      //告訴followTop要變換OtherUser的按鈕顏色\n      const { ifFollowOtherUser, followOtherId } = payload;\n      this.ifFollowOtherUser = ifFollowOtherUser;\n      this.followOtherId = followOtherId;\n    },\n    ifChangeBtnColor(payload) {\n      //告訴userInfoOther要變換按鈕顏色\n      const { changeBtnColor } = payload;\n      // this.changeBtnColor = changeBtnColor;\n      console.log(\"changeBtnColor.changeBtnColor\", changeBtnColor);\n      console.log(\"changeBtnColor.payload\", payload);\n      this.ifFollowOtherUser = changeBtnColor;\n    },\n    async fetchUserReplies(userId) {\n      try {\n        const response = await userAPI.getUserReplies(userId);\n        this.replies = [...response.data];\n        this.replies = this.replies.filter((reply) => reply.Tweet);\n        if (this.replies.length < 1) {\n          Toast.fire({\n            icon: \"info\",\n            title: \"目前沒有回覆的內容\",\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async addFollowingNum(payload) {\n      try {\n        const { followingCount, followingId } = payload;\n        if (this.isMe) {\n          this.currentUser.followingCount = followingCount;\n        } else {\n          if (this.user.id === followingId) {\n            this.user.followerCount = this.user.followerCount + 1;\n          }\n        }\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法新增此筆addFollowing\",\n        });\n      }\n    },\n    async unFollowingNum(payload) {\n      try {\n        const { followingCount, followingId } = payload;\n        if (this.isMe) {\n          this.currentUser.followingCount = followingCount;\n        } else {\n          if (this.user.id === followingId) {\n            this.user.followerCount = this.user.followerCount - 1;\n          }\n        }\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法新增此筆unFollowing\",\n        });\n      }\n    },\n    isThisMe(paramsId) {\n      this.isMe = this.currentUser.id == paramsId; // 驗證是不是我\n    },\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  created() {\n    // 用token取得資料，取得後看role，是user或是admin，如果不是use，就跳出提醒，回到登入頁\n    const twitterToken = localStorage.getItem(\"token\");\n    //console.log(twitterToken)\n    if (!twitterToken) {\n      Toast.fire({\n        icon: \"warning\",\n        title: \"請登入\",\n      });\n      this.$router.push(\"/login\");\n    }\n    const { id: userId } = this.$route.params;\n    this.fetchUser(userId);\n    this.fetchUserReplies(userId);\n    this.isThisMe(userId);\n    this.confirmUserFollowing(this.currentUser.id);\n  },\n  watch: {\n    \"$route.params.id\": {\n      handler: function (userId) {\n        this.fetchUser(userId);\n        this.fetchUserReplies(userId);\n        this.isThisMe(userId);\n      },\n      immediate: true,\n    },\n  },\n  mixins: [fromNowFilter, emptyImageFilter],\n};\n</script>\n\n<style lang=\"css\" src=\"@/assets/css/main.css\" scoped></style>\n\n<style scoped>\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelfPageReply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelfPageReply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SelfPageReply.vue?vue&type=template&id=5b6aef09&scoped=true&\"\nimport script from \"./SelfPageReply.vue?vue&type=script&lang=js&\"\nexport * from \"./SelfPageReply.vue?vue&type=script&lang=js&\"\nimport style0 from \"@/assets/css/main.css?vue&type=style&index=0&id=5b6aef09&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b6aef09\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}